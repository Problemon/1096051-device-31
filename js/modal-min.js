const buttonOpen=document.querySelector(".contacts__btn"),modal=document.querySelector(".modal"),modalFade=modal.querySelector(".modal__fade"),buttonClose=modal.querySelector(".modal__form-btn-close"),modalForm=modal.querySelector(".modal__form"),inputName=modal.querySelector(".modal__form-input-name"),inputEmail=modal.querySelector(".modal__form-input-email"),inputTextarea=modal.querySelector(".modal__form-textarea"),modalButtonSubmit=modal.querySelector(".modal__form-btn");let isStorageSupport=!0,storageName="";try{storageName=localStorage.getItem("name")}catch(e){isStorageSupport=!1}buttonOpen.addEventListener("click",function(e){e.preventDefault(),modal.classList.add("modal--vissible"),storageName?(inputName.value=localStorage.getItem("name"),inputEmail.value=localStorage.getItem("email"),inputTextarea.focus()):inputName.focus()}),modalFade.addEventListener("click",function(){modal.classList.remove("modal--vissible")}),buttonClose.addEventListener("click",function(e){e.preventDefault(),modal.classList.remove("modal--vissible"),modal.classList.remove("modal--error")}),window.addEventListener("keydown",function(e){"Esc"!==e.key&&"Escape"!==e.key||modal.classList.contains("modal--vissible")&&(e.preventDefault(),modal.classList.remove("modal--vissible"),modal.classList.remove("modal--error"))}),modalButtonSubmit.addEventListener("click",function(e){inputName.validity.valid&&inputEmail.validity.valid?isStorageSupport&&(localStorage.setItem("name",inputName.value),localStorage.setItem("email",inputEmail.value)):(modal.classList.remove("modal--error"),modal.offsetWidth,modal.classList.add("modal--error"),e.preventDefault())});