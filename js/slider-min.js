const carouselSlider=document.querySelector(".carousel-slider"),carouselList=document.querySelector(".carousel__list"),carouselProducts=document.querySelectorAll(".carousel__product"),carouselDots=document.querySelectorAll(".carousel__dot-button");let count=0,carouselWidth=carouselSlider.offsetWidth,posInit=0,posX1=0,posX2=0,posY1=0,posY2=0,posFinal=0,isSwipe=!1,isScroll=!1,allowSwipe=!0,transition=!0,nextTrf=0,prevTrf=0,lastTrf=--carouselProducts.length*carouselWidth,posThreshold=.35*carouselWidth,trfRegExp=/[-0-9.]+(?=px)/;makeSlider(carouselDots,"carousel__dot-button--active",carouselProducts,!1),window.addEventListener("resize",setWidth),setWidth(),slide=function(){carouselList.style.transition="transform .5s",carouselList.style.transform=`translate3d(-${count*carouselWidth}px, 0px, 0px)`},getEvent=function(){return-1!==event.type.search("touch")?event.touches[0]:event},swipeStart=function(){let e=getEvent();allowSwipe&&(transition=!0,nextTrf=(count+1)*-carouselWidth,prevTrf=(count-1)*-carouselWidth,posInit=posX1=e.clientX,posY1=e.clientY,carouselList.style.transition="",document.addEventListener("touchmove",swipeAction),document.addEventListener("mousemove",swipeAction),document.addEventListener("touchend",swipeEnd),document.addEventListener("mouseup",swipeEnd),carouselSlider.classList.remove("grab"),carouselSlider.classList.add("grabbing"))},swipeAction=function(){let e=getEvent(),t=+carouselList.style.transform.match(trfRegExp)[0];if(posX2=posX1-e.clientX,posX1=e.clientX,posY2=posY1-e.clientY,posY1=e.clientY,!isSwipe&&!isScroll){let e=Math.abs(posY2);e>7||0===posX2?(isScroll=!0,allowSwipe=!1):e<7&&(isSwipe=!0)}if(isSwipe){if(0===count){if(posInit<posX1)return void setTransform(t,0);allowSwipe=!0}if(count===--carouselProducts.length){if(posInit>posX1)return void setTransform(t,lastTrf);allowSwipe=!0}if(posInit>posX1&&t<nextTrf||posInit<posX1&&t>prevTrf)return void reachEdge();carouselList.style.transform=`translate3d(${t-posX2}px, 0px, 0px)`}},swipeEnd=function(){posFinal=posInit-posX1,isScroll=!1,isSwipe=!1,document.removeEventListener("touchmove",swipeAction),document.removeEventListener("mousemove",swipeAction),document.removeEventListener("touchend",swipeEnd),document.removeEventListener("mouseup",swipeEnd),carouselSlider.classList.add("grab"),carouselSlider.classList.remove("grabbing"),allowSwipe?(Math.abs(posFinal)>posThreshold&&(posInit<posX1?count--:posInit>posX1&&count++,activeDot("carousel__dot-button--active",carouselDots[carouselDots.length-1-count])),posInit!==posX1?(allowSwipe=!1,slide()):allowSwipe=!0):allowSwipe=!0},setTransform=function(e,t){e>=t&&e>t&&(carouselList.style.transform=`translate3d(${t}px, 0px, 0px)`),allowSwipe=!1},reachEdge=function(){transition=!1,swipeEnd(),allowSwipe=!0},carouselList.style.transform="translate3d(0px, 0px, 0px)",carouselSlider.classList.add("grab"),carouselList.addEventListener("transitionend",()=>allowSwipe=!0),carouselSlider.addEventListener("touchstart",swipeStart),carouselSlider.addEventListener("mousedown",swipeStart);const benefitsSlide=document.querySelectorAll(".benefits__item"),benefitsDots=document.querySelectorAll(".benefits__info-btn");function makeSlider(e,t,s,o){e.forEach(function(e,i){e.addEventListener("click",function(){if(activeDot(t,e),o){document.querySelector("."+o).classList.remove(o),s[i].classList.add(o)}else choiceSlide(i,!0)})})}function activeDot(e,t){let s=document.querySelector("."+e);s.removeAttribute("disabled"),s.classList.remove(e),t.setAttribute("disabled",""),t.classList.add(e)}function choiceSlide(e,t){count=t?carouselProducts.length-e-1:e,carouselList.style.transform="translate(-"+count*carouselWidth+"px)"}function setWidth(){carouselWidth=carouselSlider.offsetWidth,carouselList.style.width=carouselWidth*carouselProducts.length+"px",carouselProducts.forEach(e=>{e.style.width=carouselWidth+"px"}),choiceSlide(count,!1)}function checkHash(){if("#warranty"===window.location.hash){document.getElementById("warranty").click()}else if("#delivery"===window.location.hash){document.getElementById("delivery").click()}}makeSlider(benefitsDots,"benefits__info-btn--active",benefitsSlide,"benefits__item--active"),window.onhashchange=function(){checkHash()},checkHash();